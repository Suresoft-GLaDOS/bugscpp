{
  "info": {
    "url": "https://github.com/zsh-users/zsh",
    "short-desc": "Zsh is an extended Bourne shell with many improvements, including some features of Bash, ksh, and tcsh.",
    "vcs": "git"
  },
  "common": {
    "build": {
      "command": {
        "type": "docker",
        "lines": [
          "autoheader",
          "autoconf",
          "./configure --with-tcsetpgrp\"",
          "sed -i '/^name=zsh\\/zpty/ s/link=no/link=static/' config.modules",
          "make clean",
          "@DPP_GEN_COMPILATION_DB_TOOL@ make -j@DPP_PARALLEL_BUILD@\"",
          "sed -i 's|sleep 1;||' Test/Makefile\""
        ]
      }
    },
    "build-coverage": {
      "command": {
        "type": "docker",
        "lines": [
          "autoheader",
          "autoconf",
          "./configure --with-tcsetpgrp --enable-cflags=\"--coverage -g -O0\" --enable-libs=\"-lgcov\"",
          "sed -i '/^name=zsh\\/zpty/ s/link=no/link=static/' config.modules",
          "make clean",
          "@DPP_GEN_COMPILATION_DB_TOOL@ make -j@DPP_PARALLEL_BUILD@",
          "sed -i 's|sleep 1;||' Test/Makefile"
        ]
      }
    },
    "test-type": "automake",
    "test": {
      "command": {
        "type": "docker",
        "lines": [
          "bash -c \"[ -f AUTOMAKE_TEST_CASE.output ] || find Test -type f -name \"*.ztst\" -exec basename {} .ztst \\; | sort -t '\\0' > AUTOMAKE_TEST_CASE.output\"",
          "bash -c \"index=$(cat DPP_TEST_INDEX); make -s TESTNUM=$(sed -n \\\"${index}p\\\" < AUTOMAKE_TEST_CASE.output) check\""
        ]
      }
    },
    "test-coverage": {
      "command": {
        "type": "docker",
        "lines": [
          "bash -c \"[ -f AUTOMAKE_TEST_CASE.output ] || find Test -type f -name \"*.ztst\" -exec basename {} .ztst \\; | sort -t '\\0' > AUTOMAKE_TEST_CASE.output\"",
          "bash -c \"index=$(cat DPP_TEST_INDEX); make -s TESTNUM=$(sed -n \\\"${index}p\\\" < AUTOMAKE_TEST_CASE.output) check\""
        ]
      }
    },
    "gcov": {
      "exclude": [],
      "command": {
        "type": "docker",
        "lines": [
          "mkdir gcov",
          "bash -c 'cd Src; find $PWD -type f -maxdepth 1 -name \"*.o\" -exec gcov --preserve-paths {} \\;'",
          "bash -c 'cd Src/Modules; find $PWD -type f -maxdepth 1 -name \"*.o\" -exec gcov --preserve-paths {} \\;'",
          "bash -c 'cd Src/Builtins; find $PWD -type f -maxdepth 1 -name \"*.o\" -exec gcov --preserve-paths {} \\;'",
          "bash -c 'cd Src/Zle; find $PWD -type f -maxdepth 1 -name \"*.o\" -exec gcov --preserve-paths {} \\;'",
          "bash -c 'find Src -type f -name \"*.gcda\" -delete'",
          "bash -c 'find Src -type f -name \"*.gcov\" -exec mv {} /home/workspace/gcov \\;'"
        ]
      }
    }
  },
  "defects": [
    {
      "hash": "db46c9cd5844240fb6015666c8e2a12a0a3a6ead",
      "num_cases": 63,
      "case": [1],
      "description": "lib/transaction_files.c: fix leaving behind obsolete directories"
    },
    {
      "hash": "2a7945a900c8a1b1866ad31ee5e95db5b0ddb50a",
      "num_cases": 63,
      "case": [56],
      "description": "49377: fix segfault by 'bindkey -d' with reordered keymapnamtab"
    },
    {
      "hash": "daa208e90763d304dc1d554a834d0066e0b9937c",
      "num_cases": 62,
      "case": [22],
      "description": "49269: Fix \"[ ! -o ]\"."
    },
    {
      "hash": "9b3a2924101c4e17dbb9c0b8745dc4eb9cdca910",
      "num_cases": 62,
      "case": [29],
      "description": "49166: fix coredump in ${name:offset:length} with ill-formatted length"
    },
    {
      "hash": "283d2f3c2761ac549a647638bb7d8fd8de3dabb4",
      "patch": 5,
      "num_cases": 61,
      "case": [42],
      "description": "48432 and enable test: fix quotiing of zstyle -L for zstyle -e"
    }
  ]
}
