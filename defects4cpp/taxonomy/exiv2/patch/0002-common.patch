From 732ee5476d39ce9f820ba4cc605d7e954be8db66 Mon Sep 17 00:00:00 2001
From: kseo <kseo@suresofttech.com>
Date: Fri, 22 Jul 2022 16:19:49 +0900
Subject: [PATCH] common

---
 src/exiv2.cpp | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/src/exiv2.cpp b/src/exiv2.cpp
index 22ccafc4..e4fef9c3 100644
--- a/src/exiv2.cpp
+++ b/src/exiv2.cpp
@@ -114,6 +114,14 @@ namespace {
     std::string parseEscapes(const std::string& input);
 }

+#ifdef DPP_ENABLE_GCOV
+extern "C" void __gcov_flush();
+void __asan_on_error(void);
+void __asan_on_error(void) {
+  __gcov_flush();
+}
+#endif
+
 // *****************************************************************************
 // Main
 int main(int argc, char* const argv[])
--
2.25.1

